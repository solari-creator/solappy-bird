<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Solappy Bird Scores</title>
</head>
<body>
<h1>Solappy Bird</h1>
<button id="sendScore">Send Random Score</button>
<h2>Top 10 Scores</h2>
<ul id="topScores"></ul>

<script>
const topScoresEl = document.getElementById("topScores")

async function updateTopScores() {
  const res = await fetch("/top")
  const data = await res.json()
  topScoresEl.innerHTML = ""
  data.topScores.forEach(item => {
    const li = document.createElement("li")
    li.textContent = `${item.signature}: ${item.score}`
    topScoresEl.appendChild(li)
  })
}

document.getElementById("sendScore").addEventListener("click", async () => {
  const signature = "Player_" + Math.floor(Math.random()*1000)
  const score = Math.floor(Math.random()*100)
  
  await fetch("/score", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ signature, score })
  })

  updateTopScores()
})

// Sayfa açılır açılmaz top 10 güncelle
updateTopScores()
</script>
</body>
</html>
